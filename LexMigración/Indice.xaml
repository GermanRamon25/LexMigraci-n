<Window x:Class="LexMigración.Indice"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LexMigración"
        mc:Ignorable="d"
        Title="Indice" Height="600" Width="1200">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Filtros de búsqueda -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0 0 0 10">
            <TextBlock Text="Otorgante:" VerticalAlignment="Center" Margin="0 0 5 0"/>
            <TextBox Name="TxtFiltroOtorgante" Width="150" Margin="0 0 10 0" TextChanged="Filtros_Changed"/>
            <TextBlock Text="Operación:" VerticalAlignment="Center" Margin="0 0 5 0"/>
            <TextBox Name="TxtFiltroOperacion" Width="120" Margin="0 0 10 0" TextChanged="Filtros_Changed"/>
            <TextBlock Text="No. Escritura:" VerticalAlignment="Center" Margin="0 0 5 0"/>
            <TextBox Name="TxtFiltroNumero" Width="100" Margin="0 0 10 0" TextChanged="Filtros_Changed"/>
            <TextBlock Text="Fecha:" VerticalAlignment="Center" Margin="0 0 5 0"/>
            <DatePicker Name="DpFiltroFecha" Width="130" SelectedDateChanged="Filtros_Changed"/>
        </StackPanel>

        <!-- DataGrid con lista de índice -->
        <DataGrid Name="DgIndice" 
                  Grid.Row="1" 
                  AutoGenerateColumns="False" 
                  SelectionMode="Single" 
                  SelectionChanged="DgIndice_SelectionChanged" 
                  Margin="0 0 0 10"
                  CanUserAddRows="True"
                  CanUserDeleteRows="True"
                  CanUserResizeColumns="True"
                  CanUserSortColumns="True"
                  GridLinesVisibility="All"
                  HeadersVisibility="All"
                  AlternatingRowBackground="LightGray"
                  RowBackground="White">

            <DataGrid.Columns>
                <!-- Columna OTORGANTE - Editable -->
                <DataGridTextColumn Header="OTORGANTE" 
                                    Binding="{Binding Otorgante, UpdateSourceTrigger=PropertyChanged}" 
                                    Width="300"
                                    IsReadOnly="False">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>

                <!-- Columna OPERACIÓN - Editable -->
                <DataGridTextColumn Header="OPERACIÓN" 
                                    Binding="{Binding Operacion, UpdateSourceTrigger=PropertyChanged}" 
                                    Width="150"
                                    IsReadOnly="False">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>

                <!-- Columna No. ESCRITURA - Editable -->
                <DataGridTextColumn Header="No. ESCRITURA" 
                                    Binding="{Binding NumeroEscritura, UpdateSourceTrigger=PropertyChanged}" 
                                    Width="120"
                                    IsReadOnly="False">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>

                <!-- Columna VOLUMEN - Editable -->
                <DataGridTextColumn Header="VOLUMEN" 
                                    Binding="{Binding Volumen, UpdateSourceTrigger=PropertyChanged}" 
                                    Width="80"
                                    IsReadOnly="False">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>

                <!-- Columna LIBRO - Editable -->
                <DataGridTextColumn Header="LIBRO" 
                                    Binding="{Binding Libro, UpdateSourceTrigger=PropertyChanged}" 
                                    Width="70"
                                    IsReadOnly="False">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>

                <!-- Columna FECHA - Editable -->
                <DataGridTextColumn Header="FECHA" 
                                    Binding="{Binding Fecha, StringFormat=dd/MM/yyyy, UpdateSourceTrigger=PropertyChanged}" 
                                    Width="100"
                                    IsReadOnly="False">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>

                <!-- Columna FOLIO - Editable -->
                <DataGridTextColumn Header="FOLIO" 
                                    Binding="{Binding Folio, UpdateSourceTrigger=PropertyChanged}" 
                                    Width="80"
                                    IsReadOnly="False">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Padding" Value="5,2"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="TextAlignment" Value="Center"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>

            <!-- Estilo para las cabeceras -->
            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="#4CAF50"/>
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                    <Setter Property="Padding" Value="8,5"/>
                    <Setter Property="BorderBrush" Value="#2E7D32"/>
                    <Setter Property="BorderThickness" Value="1"/>
                </Style>
            </DataGrid.ColumnHeaderStyle>

            <!-- Estilo para las filas -->
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Setter Property="MinHeight" Value="25"/>
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#E8F5E8"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#C8E6C9"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
        </DataGrid>

        <!-- Detalles y Botones -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left">
            <Button Name="BtnMigrarProtocolo" Content="Migrar Protocolo → Índice" Width="180" Click="BtnMigrarProtocolo_Click" Margin="0,0,10,0"/>
            <Button Name="BtnGuardarCambios" Content="Guardar Cambios" Width="120" Click="BtnGuardarCambios_Click" Margin="0,0,10,0"/>
            <Button Name="BtnAgregarFila" Content="Agregar Fila" Width="100" Click="BtnAgregarFila_Click" Margin="0,0,10,0"/>
            <TextBlock Name="TxtMensaje" VerticalAlignment="Center" Foreground="Green" FontWeight="Bold"/>
        </StackPanel>
    </Grid>
</Window>